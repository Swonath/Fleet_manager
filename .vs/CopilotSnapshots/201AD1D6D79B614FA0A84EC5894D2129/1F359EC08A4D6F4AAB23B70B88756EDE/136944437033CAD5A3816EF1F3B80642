using System.Windows;
using FLEET_MANAGER.ViewModels;

namespace FLEET_MANAGER.Views
{
    public partial class LoginWindow : Window
    {
        public LoginWindow()
        {
            InitializeComponent();
            var loginViewModel = new LoginViewModel();
            DataContext = loginViewModel;

            // Synchroniser le PasswordBox avec le ViewModel
            PasswordBox.PasswordChanged += (s, e) =>
            {
                loginViewModel.MotDePasse = PasswordBox.Password;
            };

            // Gérer la connexion réussie
            loginViewModel.LoginSucceeded += (s, utilisateur) =>
            {
                // Ouvrir la fenêtre principale
                var mainWindow = new MainWindow();
                mainWindow.Show();
                
                // Fermer la fenêtre de connexion
                this.Close();
            };
        }
    }
}
