<UserControl x:Class="FLEET_MANAGER.Views.TrajetView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#f5f5f5">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="400"/>
        </Grid.ColumnDefinitions>

        <!-- Historique -->
        <StackPanel Grid.Column="0" Margin="20">
            <TextBlock Text="Gestion des Trajets" FontSize="24" FontWeight="Bold" Margin="0,0,0,20" Foreground="#1e3a8a"/>
            
            <!-- Selection vehicule -->
            <TextBlock Text="Selectionner un vehicule" FontSize="12" Foreground="#334155" Margin="0,0,0,5"/>
            <ComboBox ItemsSource="{Binding Vehicules}"
                      SelectedItem="{Binding VehiculeSelectionne}"
                      DisplayMemberPath="DescriptionComplete"
                      Height="35"
                      Padding="10"
                      Margin="0,0,0,15"/>

            <!-- Message -->
            <TextBlock Text="{Binding MessageErreur}"
                       Foreground="#dc2626"
                       TextWrapping="Wrap"
                       Margin="0,0,0,10"
                       FontSize="11"/>

            <!-- Tableau trajets -->
            <DataGrid ItemsSource="{Binding Trajets}"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      IsReadOnly="True"
                      BorderBrush="#e2e8f0"
                      BorderThickness="1"
                      RowBackground="White"
                      AlternatingRowBackground="#f8fafc">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Date" Binding="{Binding DateTrajet}" Width="90"/>
                    <DataGridTextColumn Header="Heure dep." Binding="{Binding HeureDepart}" Width="70"/>
                    <DataGridTextColumn Header="Heure arr." Binding="{Binding HeureArrivee}" Width="70"/>
                    <DataGridTextColumn Header="Lieu depart" Binding="{Binding LieuDepart}" Width="100"/>
                    <DataGridTextColumn Header="Lieu arrivee" Binding="{Binding LieuArrivee}" Width="100"/>
                    <DataGridTextColumn Header="Distance" Binding="{Binding DistanceParcourue}" Width="80"/>
                    <DataGridTextColumn Header="Type" Binding="{Binding TypeTrajet}" Width="80"/>
                    <DataGridTextColumn Header="Notes" Binding="{Binding Notes}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>
        </StackPanel>

        <!-- Formulaire -->
        <Border Grid.Column="1" Background="White" Margin="20,20,20,20" CornerRadius="8" Padding="15">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <TextBlock Text="Enregistrer trajet" FontSize="14" FontWeight="Bold" Margin="0,0,0,15"/>

                    <!-- Date -->
                    <TextBlock Text="Date" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <DatePicker SelectedDate="{Binding DateTrajet, UpdateSourceTrigger=PropertyChanged}"
                                Height="30"
                                Padding="8"
                                Margin="0,0,0,10"/>

                    <!-- Heure depart -->
                    <TextBlock Text="Heure depart" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding HeureDepart, UpdateSourceTrigger=PropertyChanged}"
                             Height="30"
                             Padding="8"
                             Margin="0,0,0,10"/>

                    <!-- Heure arrivee -->
                    <TextBlock Text="Heure arrivee" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding HeureArrivee, UpdateSourceTrigger=PropertyChanged}"
                             Height="30"
                             Padding="8"
                             Margin="0,0,0,10"/>

                    <!-- Lieu depart -->
                    <TextBlock Text="Lieu depart" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding LieuDepart, UpdateSourceTrigger=PropertyChanged}"
                             Height="30"
                             Padding="8"
                             Margin="0,0,0,10"/>

                    <!-- Lieu arrivee -->
                    <TextBlock Text="Lieu arrivee" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding LieuArrivee, UpdateSourceTrigger=PropertyChanged}"
                             Height="30"
                             Padding="8"
                             Margin="0,0,0,10"/>

                    <!-- Kilometrage depart -->
                    <TextBlock Text="Kilometrage dep." FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding KilomettrageDepart, UpdateSourceTrigger=PropertyChanged}"
                             Height="30"
                             Padding="8"
                             Margin="0,0,0,10"/>

                    <!-- Kilometrage arrivee -->
                    <TextBlock Text="Kilometrage arr." FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding KilomettrageArrivee, UpdateSourceTrigger=PropertyChanged}"
                             Height="30"
                             Padding="8"
                             Margin="0,0,0,10"/>

                    <!-- Distance parcourue (affichage) -->
                    <TextBlock Text="Distance (km)" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBlock Text="{Binding DistanceParcourue}"
                               Height="30"
                               Padding="8"
                               Background="#f1f5f9"
                               Margin="0,0,0,10"/>

                    <!-- Type trajet -->
                    <TextBlock Text="Type de trajet" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <ComboBox Text="{Binding TypeTrajet, UpdateSourceTrigger=PropertyChanged}"
                              Height="30"
                              Padding="8"
                              Margin="0,0,0,10">
                        <ComboBoxItem>Personnel</ComboBoxItem>
                        <ComboBoxItem>Professionnel</ComboBoxItem>
                        <ComboBoxItem>Service</ComboBoxItem>
                    </ComboBox>

                    <!-- Notes -->
                    <TextBlock Text="Notes" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding Notes, UpdateSourceTrigger=PropertyChanged}"
                             Height="60"
                             Padding="8"
                             TextWrapping="Wrap"
                             VerticalScrollBarVisibility="Auto"
                             Margin="0,0,0,15"/>

                    <!-- Boutons -->
                    <StackPanel Orientation="Vertical">
                        <Button Command="{Binding EnregistrerCommand}"
                                Content="Enregistrer"
                                Height="32"
                                Background="#16a34a"
                                Foreground="White"
                                Cursor="Hand"
                                Margin="0,0,0,5"/>

                        <Button Command="{Binding ReinitialiserCommand}"
                                Content="Reinitialiser"
                                Height="32"
                                Background="#64748b"
                                Foreground="White"
                                Cursor="Hand"/>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</UserControl>
