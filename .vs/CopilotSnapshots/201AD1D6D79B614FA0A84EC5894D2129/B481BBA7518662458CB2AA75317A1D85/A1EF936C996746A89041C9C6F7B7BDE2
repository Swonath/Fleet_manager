<UserControl x:Class="FLEET_MANAGER.Views.VehiculeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#f5f5f5">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="350"/>
        </Grid.ColumnDefinitions>

        <!-- Liste des vehicules -->
        <StackPanel Grid.Column="0" Margin="20">
            <TextBlock Text="Gestion des Vehicules" FontSize="24" FontWeight="Bold" Margin="0,0,0,20" Foreground="#1e3a8a"/>
            
            <!-- Boutons d'action -->
            <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                <Button Command="{Binding ChargerCommand}" 
                        Content="Actualiser" 
                        Height="35" 
                        Padding="15,0"
                        Background="#3b82f6"
                        Foreground="White"
                        Cursor="Hand"
                        Margin="0,0,5,0"/>
                
                <Button Command="{Binding Nouveau}" 
                        Content="Nouveau vehicule" 
                        Height="35" 
                        Padding="15,0"
                        Background="#16a34a"
                        Foreground="White"
                        Cursor="Hand"/>
            </StackPanel>

            <!-- Message -->
            <TextBlock Text="{Binding MessageErreur}"
                       Foreground="#dc2626"
                       TextWrapping="Wrap"
                       Margin="0,0,0,10"
                       FontSize="11"/>

            <!-- Tableau des vehicules -->
            <DataGrid ItemsSource="{Binding Vehicules}"
                      SelectedItem="{Binding VehiculeSelectionne}"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      IsReadOnly="True"
                      BorderBrush="#e2e8f0"
                      BorderThickness="1"
                      RowBackground="White"
                      AlternatingRowBackground="#f8fafc">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Marque" Binding="{Binding Marque}" Width="100"/>
                    <DataGridTextColumn Header="Modele" Binding="{Binding Modele}" Width="120"/>
                    <DataGridTextColumn Header="Immatriculation" Binding="{Binding Immatriculation}" Width="120"/>
                    <DataGridTextColumn Header="Annee" Binding="{Binding AnneeFabrication}" Width="70"/>
                    <DataGridTextColumn Header="Type" Binding="{Binding TypeCarburant}" Width="100"/>
                    <DataGridTextColumn Header="Etat" Binding="{Binding Etat}" Width="120"/>
                    <DataGridTextColumn Header="Kilometrage" Binding="{Binding KilomettrageActuel}" Width="100"/>
                </DataGrid.Columns>
            </DataGrid>
        </StackPanel>

        <!-- Formulaire -->
        <Border Grid.Column="1" Background="White" Margin="20,20,20,20" CornerRadius="8" Padding="20">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <TextBlock Text="Formulaire vehicule" FontSize="14" FontWeight="Bold" Margin="0,0,0,15"/>

                    <!-- Marque -->
                    <TextBlock Text="Marque" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding Marque, UpdateSourceTrigger=PropertyChanged}"
                             Height="35"
                             Padding="10"
                             Margin="0,0,0,5"
                             IsEnabled="{Binding EstEnEdition}"/>
                    <TextBlock Text="{Binding MarqueError}"
                               Foreground="#dc2626"
                               FontSize="10"
                               Margin="0,0,0,10"/>

                    <!-- Modele -->
                    <TextBlock Text="Modele" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding Modele, UpdateSourceTrigger=PropertyChanged}"
                             Height="35"
                             Padding="10"
                             Margin="0,0,0,5"
                             IsEnabled="{Binding EstEnEdition}"/>
                    <TextBlock Text="{Binding ModeleError}"
                               Foreground="#dc2626"
                               FontSize="10"
                               Margin="0,0,0,10"/>

                    <!-- Immatriculation -->
                    <TextBlock Text="Immatriculation" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding Immatriculation, UpdateSourceTrigger=PropertyChanged}"
                             Height="35"
                             Padding="10"
                             Margin="0,0,0,5"
                             IsEnabled="{Binding EstEnEdition}"/>
                    <TextBlock Text="{Binding ImmatriculationError}"
                               Foreground="#dc2626"
                               FontSize="10"
                               Margin="0,0,0,10"/>

                    <!-- Annee -->
                    <TextBlock Text="Annee de fabrication" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding Annee, UpdateSourceTrigger=PropertyChanged}"
                             Height="35"
                             Padding="10"
                             Margin="0,0,0,10"
                             IsEnabled="{Binding EstEnEdition}"/>

                    <!-- Type carburant -->
                    <TextBlock Text="Type de carburant" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <ComboBox Text="{Binding TypeCarburant, UpdateSourceTrigger=PropertyChanged}"
                              Height="35"
                              Padding="10"
                              Margin="0,0,0,10"
                              IsEnabled="{Binding EstEnEdition}">
                        <ComboBoxItem>Essence</ComboBoxItem>
                        <ComboBoxItem>Diesel</ComboBoxItem>
                        <ComboBoxItem>Hybride</ComboBoxItem>
                        <ComboBoxItem>Electrique</ComboBoxItem>
                    </ComboBox>

                    <!-- Kilometrage initial -->
                    <TextBlock Text="Kilometrage initial" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding KilomettrageInitial, UpdateSourceTrigger=PropertyChanged}"
                             Height="35"
                             Padding="10"
                             Margin="0,0,0,10"
                             IsEnabled="{Binding EstEnEdition}"/>

                    <!-- Date acquisition -->
                    <TextBlock Text="Date d'acquisition" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <DatePicker SelectedDate="{Binding DateAcquisition, UpdateSourceTrigger=PropertyChanged}"
                                Height="35"
                                Padding="10"
                                Margin="0,0,0,10"
                                IsEnabled="{Binding EstEnEdition}"/>

                    <!-- Etat -->
                    <TextBlock Text="Etat" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <ComboBox Text="{Binding Etat, UpdateSourceTrigger=PropertyChanged}"
                              Height="35"
                              Padding="10"
                              Margin="0,0,0,15"
                              IsEnabled="{Binding EstEnEdition}">
                        <ComboBoxItem>En service</ComboBoxItem>
                        <ComboBoxItem>En maintenance</ComboBoxItem>
                        <ComboBoxItem>Retire du service</ComboBoxItem>
                    </ComboBox>

                    <!-- Boutons -->
                    <StackPanel Orientation="Vertical">
                        <Button Command="{Binding AjouterCommand}"
                                Content="Ajouter"
                                Height="35"
                                Background="#16a34a"
                                Foreground="White"
                                Cursor="Hand"
                                Margin="0,0,0,5"
                                Visibility="{Binding EstEnEdition, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter=Invert, FallbackValue=Collapsed}"/>

                        <Button Command="{Binding SauvegarderCommand}"
                                Content="Sauvegarder"
                                Height="35"
                                Background="#3b82f6"
                                Foreground="White"
                                Cursor="Hand"
                                Margin="0,0,0,5"
                                Visibility="{Binding EstEnEdition, Converter={StaticResource BoolToVisibilityConverter}, FallbackValue=Collapsed}"/>

                        <Button Command="{Binding ModifierCommand}"
                                Content="Modifier"
                                Height="35"
                                Background="#f59e0b"
                                Foreground="White"
                                Cursor="Hand"
                                Margin="0,0,0,5"
                                Visibility="{Binding EstEnEdition, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter=Invert, FallbackValue=Collapsed}"/>

                        <Button Command="{Binding SupprimerCommand}"
                                Content="Supprimer"
                                Height="35"
                                Background="#dc2626"
                                Foreground="White"
                                Cursor="Hand"
                                Margin="0,0,0,5"
                                Visibility="{Binding EstEnEdition, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter=Invert, FallbackValue=Collapsed}"/>

                        <Button Command="{Binding AnnulerCommand}"
                                Content="Annuler"
                                Height="35"
                                Background="#64748b"
                                Foreground="White"
                                Cursor="Hand"
                                Visibility="{Binding EstEnEdition, Converter={StaticResource BoolToVisibilityConverter}, FallbackValue=Collapsed}"/>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</UserControl>
