<UserControl x:Class="FLEET_MANAGER.Views.CarburantTrajetView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#f5f5f5">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Section Carburant -->
        <StackPanel Grid.Column="0" Margin="20">
            <TextBlock Text="Gestion Carburant &amp; Trajet" FontSize="18" FontWeight="Bold" Margin="0,0,0,20"/>
            
            <!-- Selection vehicule -->
            <TextBlock Text="Selectionnez un vehicule" FontSize="12" Foreground="#334155" Margin="0,0,0,5"/>
            <ComboBox ItemsSource="{Binding Vehicules}"
                      SelectedItem="{Binding VehiculeSelectionne}"
                      DisplayMemberPath="DescriptionComplete"
                      Height="35"
                      Padding="10"
                      Margin="0,0,0,15"/>

            <!-- Message d'erreur -->
            <TextBlock Text="{Binding MessageErreur}"
                       Foreground="#dc2626"
                       TextWrapping="Wrap"
                       Margin="0,0,0,10"
                       FontSize="11"/>

            <!-- Historique Carburant -->
            <TextBlock Text="Historique Carburant" FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>
            <DataGrid ItemsSource="{Binding Historique}"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      IsReadOnly="True"
                      Height="200"
                      Margin="0,0,0,20">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Date" Binding="{Binding DateSaisie, StringFormat=dd/MM/yyyy}" Width="100"/>
                    <DataGridTextColumn Header="Quantite (L)" Binding="{Binding QuantiteLitres}" Width="80"/>
                    <DataGridTextColumn Header="Cout (euro)" Binding="{Binding CoutTotal}" Width="80"/>
                    <DataGridTextColumn Header="Km" Binding="{Binding Kilometrage}" Width="80"/>
                </DataGrid.Columns>
            </DataGrid>

            <!-- Historique Trajets -->
            <TextBlock Text="Historique Trajets" FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>
            <DataGrid ItemsSource="{Binding Trajets}"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      IsReadOnly="True"
                      Height="200">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Date" Binding="{Binding DateTrajet, StringFormat=dd/MM/yyyy}" Width="100"/>
                    <DataGridTextColumn Header="Depart" Binding="{Binding LieuDepart}" Width="100"/>
                    <DataGridTextColumn Header="Arrivee" Binding="{Binding LieuArrivee}" Width="100"/>
                    <DataGridTextColumn Header="Distance (km)" Binding="{Binding DistanceParcourue}" Width="100"/>
                </DataGrid.Columns>
            </DataGrid>
        </StackPanel>

        <!-- Section Formulaires -->
        <StackPanel Grid.Column="1" Margin="20">
            <!-- Formulaire Carburant -->
            <Border Background="White" CornerRadius="8" Padding="15" Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="Ajouter Carburant" FontSize="14" FontWeight="Bold" Margin="0,0,0,15"/>

                    <TextBlock Text="Date" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <DatePicker SelectedDate="{Binding DateSaisie}" Height="35" Padding="10" Margin="0,0,0,10"/>

                    <TextBlock Text="Quantité (L)" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding QuantiteLitres}" Height="35" Padding="10" Margin="0,0,0,10"/>

                    <TextBlock Text="Cout Total (euro)" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding CoutTotal}" Height="35" Padding="10" Margin="0,0,0,10"/>

                    <TextBlock Text="Cout par Litre (euro)" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBlock Text="{Binding CoutParLitre}" Height="35" Padding="10" Background="#f0f0f0" Margin="0,0,0,10"/>

                    <TextBlock Text="Kilométrage" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding KilometrageCarburant}" Height="35" Padding="10" Margin="0,0,0,10"/>

                    <TextBlock Text="Notes" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding NotesCarburant}" Height="60" Padding="10" TextWrapping="Wrap" Margin="0,0,0,10"/>

                    <Button Command="{Binding EnregistrerCarburantCommand}"
                            Content="Enregistrer Carburant"
                            Height="35"
                            Background="#3b82f6"
                            Foreground="White"
                            Cursor="Hand"/>
                </StackPanel>
            </Border>

            <!-- Formulaire Trajet -->
            <Border Background="White" CornerRadius="8" Padding="15">
                <StackPanel>
                    <TextBlock Text="Ajouter Trajet" FontSize="14" FontWeight="Bold" Margin="0,0,0,15"/>

                    <TextBlock Text="Date" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <DatePicker SelectedDate="{Binding DateTrajet}" Height="35" Padding="10" Margin="0,0,0,10"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Margin="0,0,5,0">
                            <TextBlock Text="Heure Depart" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                            <TextBox Text="{Binding HeureDepart}" Height="35" Padding="10" Margin="0,0,0,10"/>
                        </StackPanel>

                        <StackPanel Grid.Column="1" Margin="5,0,0,0">
                            <TextBlock Text="Heure Arrivee" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                            <TextBox Text="{Binding HeureArrivee}" Height="35" Padding="10" Margin="0,0,0,10"/>
                        </StackPanel>
                    </Grid>

                    <TextBlock Text="Km Depart" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding KilometrageDepart}" Height="35" Padding="10" Margin="0,0,0,10"/>

                    <TextBlock Text="Km Arrivee" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding KilometrageArrivee}" Height="35" Padding="10" Margin="0,0,0,10"/>

                    <TextBlock Text="Distance (km)" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBlock Text="{Binding DistanceParcourue}" Height="35" Padding="10" Background="#f0f0f0" Margin="0,0,0,10"/>

                    <TextBlock Text="Lieu Départ" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding LieuDepart}" Height="35" Padding="10" Margin="0,0,0,10"/>

                    <TextBlock Text="Lieu Arrivée" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding LieuArrivee}" Height="35" Padding="10" Margin="0,0,0,10"/>

                    <TextBlock Text="Type Trajet" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <ComboBox Text="{Binding TypeTrajet}" Height="35" Padding="10" Margin="0,0,0,10">
                        <ComboBoxItem>Personnel</ComboBoxItem>
                        <ComboBoxItem>Professionnel</ComboBoxItem>
                        <ComboBoxItem>Service</ComboBoxItem>
                    </ComboBox>

                    <TextBlock Text="Notes" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding NotesTrajet}" Height="60" Padding="10" TextWrapping="Wrap" Margin="0,0,0,10"/>

                    <Button Command="{Binding EnregistrerTrajetCommand}"
                            Content="Enregistrer Trajet"
                            Height="35"
                            Background="#16a34a"
                            Foreground="White"
                            Cursor="Hand"
                            Margin="0,0,0,5"/>

                    <Button Command="{Binding ReinitialiserCommand}"
                            Content="Réinitialiser"
                            Height="35"
                            Background="#64748b"
                            Foreground="White"
                            Cursor="Hand"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </Grid>
</UserControl>
