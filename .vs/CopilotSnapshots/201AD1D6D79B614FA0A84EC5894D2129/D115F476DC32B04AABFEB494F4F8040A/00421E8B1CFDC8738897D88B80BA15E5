<Window x:Class="FLEET_MANAGER.Views.CarburantWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Suivi du carburant" Height="700" Width="1000"
        WindowStartupLocation="CenterOwner"
        Background="#f5f5f5">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="350"/>
        </Grid.ColumnDefinitions>

        <!-- Historique -->
        <StackPanel Grid.Column="0" Margin="20">
            <TextBlock Text="Historique du carburant" FontSize="18" FontWeight="Bold" Margin="0,0,0,10"/>
            
            <!-- Selection vehicule -->
            <TextBlock Text="Selectionner un vehicule" FontSize="12" Foreground="#334155" Margin="0,0,0,5"/>
            <ComboBox ItemsSource="{Binding Vehicules}"
                      SelectedItem="{Binding VehiculeSelectionne}"
                      DisplayMemberPath="DescriptionComplete"
                      Height="35"
                      Padding="10"
                      Margin="0,0,0,15"/>

            <!-- Message -->
            <TextBlock Text="{Binding MessageErreur}"
                       Foreground="#dc2626"
                       TextWrapping="Wrap"
                       Margin="0,0,0,10"
                       FontSize="11"/>

            <!-- Tableau historique -->
            <DataGrid ItemsSource="{Binding Historique}"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      IsReadOnly="True"
                      BorderBrush="#e2e8f0"
                      BorderThickness="1"
                      RowBackground="White"
                      AlternatingRowBackground="#f8fafc"
                      Height="580">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Date" Binding="{Binding DateSaisie}" Width="100"/>
                    <DataGridTextColumn Header="Quantite L" Binding="{Binding QuantiteLitres}" Width="90"/>
                    <DataGridTextColumn Header="Cout EUR" Binding="{Binding CoutTotal}" Width="90"/>
                    <DataGridTextColumn Header="Cout par L" Binding="{Binding CoutParLitre}" Width="90"/>
                    <DataGridTextColumn Header="Kilometrage" Binding="{Binding Kilometrage}" Width="100"/>
                    <DataGridTextColumn Header="Notes" Binding="{Binding Notes}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>
        </StackPanel>

        <!-- Formulaire -->
        <Border Grid.Column="1" Background="White" Margin="20,20,20,20" CornerRadius="8" Padding="20">
            <StackPanel>
                <TextBlock Text="Enregistrer ravitaillement" FontSize="14" FontWeight="Bold" Margin="0,0,0,15"/>

                <!-- Quantite -->
                <TextBlock Text="Quantite (litres)" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                <TextBox Text="{Binding QuantiteLitres, UpdateSourceTrigger=PropertyChanged}"
                         Height="35"
                         Padding="10"
                         Margin="0,0,0,10"/>

                <!-- Cout total -->
                <TextBlock Text="Cout total (EUR)" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                <TextBox Text="{Binding CoutTotal, UpdateSourceTrigger=PropertyChanged}"
                         Height="35"
                         Padding="10"
                         Margin="0,0,0,10"/>

                <!-- Cout par litre (affichage) -->
                <TextBlock Text="Cout par litre (EUR)" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                <TextBlock Text="{Binding CoutParLitre}"
                           Height="35"
                           Padding="10"
                           Background="#f1f5f9"
                           Margin="0,0,0,10"/>

                <!-- Date -->
                <TextBlock Text="Date" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                <DatePicker SelectedDate="{Binding DateSaisie, UpdateSourceTrigger=PropertyChanged}"
                            Height="35"
                            Padding="10"
                            Margin="0,0,0,10"/>

                <!-- Kilometrage -->
                <TextBlock Text="Kilometrage (km)" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                <TextBox Text="{Binding Kilometrage, UpdateSourceTrigger=PropertyChanged}"
                         Height="35"
                         Padding="10"
                         Margin="0,0,0,10"/>

                <!-- Notes -->
                <TextBlock Text="Notes" FontSize="11" Foreground="#334155" Margin="0,0,0,3"/>
                <TextBox Text="{Binding Notes, UpdateSourceTrigger=PropertyChanged}"
                         Height="70"
                         Padding="10"
                         TextWrapping="Wrap"
                         VerticalScrollBarVisibility="Auto"
                         Margin="0,0,0,15"/>

                <!-- Boutons -->
                <StackPanel Orientation="Vertical">
                    <Button Command="{Binding EnregistrerCommand}"
                            Content="Enregistrer"
                            Height="35"
                            Background="#16a34a"
                            Foreground="White"
                            Cursor="Hand"
                            Margin="0,0,0,5"/>

                    <Button Command="{Binding ReinitialiserCommand}"
                            Content="Reinitialiser"
                            Height="35"
                            Background="#64748b"
                            Foreground="White"
                            Cursor="Hand"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</Window>
