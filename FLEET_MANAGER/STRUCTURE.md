# ?? Résumé de la Structure du Projet

## ?? Architecture du Répertoire

```
FLEET_MANAGER/
?
??? ?? Config/
?   ??? DatabaseConfig.cs                 # Configuration BD (paramètres)
?
??? ?? Converters/
?   ??? InvertBoolConverter.cs             # Convertisseur XAML
?
??? ?? Data/
?   ??? DatabaseConnection.cs              # Gestion connexion MySQL
?
??? ?? Database/
?   ??? fleet_manager.sql                  # Script de création BD
?   ??? requetes_utiles.sql                # Requêtes SQL utiles
?
??? ?? Models/
?   ??? Models.cs                          # Modèles de données
?       ??? Utilisateur
?       ??? Vehicule
?       ??? Carburant
?       ??? Trajet
?       ??? Maintenance
?       ??? Rapport
?
??? ?? Repositories/
?   ??? Repositories.cs                    # Accès aux données
?       ??? VehiculeRepository
?       ??? CarburantRepository
?       ??? TrajetRepository
?
??? ?? ViewModels/
?   ??? ViewModelBase.cs                   # Classe de base MVVM
?   ??? LoginViewModel.cs                  # Logique de connexion
?   ??? DashboardViewModel.cs              # Logique du tableau de bord
?
??? ?? Views/
?   ??? LoginWindow.xaml                   # Interface de connexion
?   ??? LoginWindow.xaml.cs                # Code-behind connexion
?   ??? MainWindow.xaml                    # Interface principal/tableau de bord
?   ??? MainWindow.xaml.cs                 # Code-behind main
?
??? App.xaml                               # Configuration appli
??? App.xaml.cs                            # Initialisation appli
?
??? FLEET_MANAGER.csproj                   # Fichier projet
?
??? ?? Documentation/
    ??? README.md                          # Documentation générale
    ??? INSTALLATION_RAPIDE.md             # Guide d'installation
    ??? GUIDE_DEVELOPPEMENT.md             # Guide pour développer
    ??? TODO.md                            # Liste de tâches
    ??? STRUCTURE.md                       # Ce fichier
```

## ??? Architecture en Couches

```
???????????????????????????????????????????????
?           Couche Présentation (UI)          ?
?  (Views: LoginWindow, MainWindow, etc.)     ?
???????????????????????????????????????????????
                     ? Binding
                     ?
???????????????????????????????????????????????
?         Couche Logique (ViewModels)         ?
? (LoginVM, DashboardVM, etc.)                ?
?                                             ?
? - Gestion des commandes                     ?
? - Validation des données                    ?
? - Notification des changements              ?
???????????????????????????????????????????????
                     ? Appels
                     ?
???????????????????????????????????????????????
?       Couche Métier (Repositories)          ?
? (VehiculeRepository, CarburantRepository)   ?
?                                             ?
? - CRUD des entités                          ?
? - Logique métier complexe                   ?
???????????????????????????????????????????????
                     ? Requêtes SQL
                     ?
???????????????????????????????????????????????
?    Couche Données (DatabaseConnection)      ?
?                                             ?
? - Connexion MySQL                           ?
? - Exécution des requêtes                    ?
? - Gestion des transactions                  ?
???????????????????????????????????????????????
                     ?
                     ?
            ???????????????????
            ?  MySQL Database ?
            ? (fleet_manager) ?
            ???????????????????
```

## ??? Schéma de la Base de Données

```
????????????????????
?  utilisateurs    ?
????????????????????
? id_utilisateur   ? (PK)
? nom_utilisateur  ? (UNIQUE)
? email            ? (UNIQUE)
? mot_de_passe     ?
? nom              ?
? prenom           ?
? role             ?
? date_creation    ?
? actif            ?
????????????????????
         ? 1:N
         ?
    ?????????????????????????????????????????????????????????????????
    ?                     ?                      ?                  ?
    ?                     ?                      ?                  ?
????????????????  ????????????????  ????????????????????  ????????????????????
? carburants   ?  ? trajets      ?  ? maintenances     ?  ? rapports         ?
????????????????  ????????????????  ????????????????????  ????????????????????
? id_carburant ?  ? id_trajet    ?  ? id_maintenance   ?  ? id_rapport       ?
? id_vehicule  ?  ? id_vehicule  ?  ? id_vehicule      ?  ? id_vehicule      ?
? date_saisie  ?  ? date_trajet  ?  ? date_maintenance ?  ? type_rapport     ?
? quantite_L   ?  ? distance     ?  ? type             ?  ? date_debut       ?
? cout_total   ?  ? lieu_depart  ?  ? description      ?  ? date_fin         ?
? kilometrage  ?  ? lieu_arrivee ?  ? cout             ?  ? donnees_json     ?
? notes        ?  ? notes        ?  ? fournisseur      ?  ? date_generation  ?
? id_utilisateur  ? id_utilisateur  ? id_utilisateur   ?  ? id_utilisateur   ?
????????????????  ????????????????  ????????????????????  ????????????????????
     ? FK          ? FK          ? FK          ? FK
     ?            ?            ?            ?
     ????????????????????????????????????????
                  ?
                  ?
          ????????????????????
          ?  vehicules       ?
          ????????????????????
          ? id_vehicule (PK) ?
          ? marque           ?
          ? modele           ?
          ? immatriculation  ?
          ? annee_fabrication?
          ? type_carburant   ?
          ? kilometrage_*    ?
          ? date_acquisition ?
          ? etat             ?
          ? date_creation    ?
          ? date_modification?
          ????????????????????
```

## ?? Flux de Données - Exemple: Afficher les véhicules

```
1. Utilisateur ouvre MainWindow
                    ?
                    ?
2. MainWindow.xaml.cs crée DashboardViewModel
                    ?
                    ?
3. DashboardViewModel appelle ChargerDonnees()
                    ?
                    ?
4. VehiculeRepository.ObtenirTousLesVehicules()
                    ?
                    ?
5. DatabaseConnection.ExecuteQuery()
                    ?
                    ?
6. MySQL retourne les données
                    ?
                    ?
7. Repository crée les objets Vehicule
                    ?
                    ?
8. ViewModel met à jour ObservableCollection<Vehicule>
                    ?
                    ?
9. XAML binding détecte le changement
                    ?
                    ?
10. DataGrid se met à jour et affiche les véhicules
```

## ?? Flux d'Authentification

```
LoginWindow.xaml
    ?
    ? Utilisateur clique sur "Connexion"
    ?
LoginViewModel.PerformerConnexion()
    ?
    ? Récupère username et password
    ?
DatabaseConnection.ExecuteQuery()
    ?
    ? Requête: SELECT * FROM utilisateurs WHERE username=? AND password=?
    ?
MySQL retourne l'utilisateur (ou NULL)
    ?
    ?? Si utilisateur trouvé:
    ?   ?
    ?   ?? Créer objet Utilisateur
    ?   ?
    ?   ?? Déclencher l'événement LoginSucceeded
    ?   ?
    ?   ?? LoginWindow ouvre MainWindow
    ?   ?
    ?   ?? MainWindow initialise le ViewModel avec l'utilisateur
    ?
    ?? Si pas trouvé:
        ?
        ?? Afficher message d'erreur
```

## ?? Fichiers de Configuration

```
DatabaseConfig.cs
??? Server: "localhost"
??? Database: "fleet_manager"
??? UserId: "root"
??? Password: ""
??? Port: 3306
```

## ?? Points d'Entrée

1. **App.xaml** ? Définit le StartupUri
2. **App.xaml.cs** ? Initialise la connexion MySQL
3. **LoginWindow.xaml** ? Premier écran
4. **MainWindow.xaml** ? Tableau de bord principal

## ?? Conventions de Nommage

```csharp
// Classes
public class MonObjet { }           // PascalCase

// Propriétés publiques
public string Nom { get; set; }     // PascalCase

// Champs privés
private string _nom;                 // _camelCase

// Constantes
public const int MAX_ITEMS = 100;   // UPPER_CASE

// Méthodes
public void ChargerDonnees() { }    // PascalCase

// Variables locales
var maVariable = "valeur";          // camelCase

// Interfaces
public interface IRepository { }     // IPrefixPascalCase

// Énums
public enum EtatVehicule { }        // PascalCase
```

## ? Bonnes Pratiques Implémentées

? Architecture MVVM claire
? Séparation des responsabilités
? Pattern Repository pour l'accès BD
? INotifyPropertyChanged pour les bindings
? Paramètres SQL (prévention SQL injection)
? Gestion des exceptions
? Code commenté
? Configuration centralisée
? Convertisseurs XAML personnalisés
? RelayCommand pour les actions

## ?? Prochaines Étapes

1. Implémenter les modules manquants (voir TODO.md)
2. Ajouter des validations complètes
3. Créer des fenêtres pour chaque module
4. Ajouter des graphiques et statistiques
5. Implémenter les rapports PDF/Excel

---

**Mise à jour** : 2025-11-03
