<UserControl x:Class="FLEET_MANAGER.Views.CarburantTrajetView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#f5f5f5">
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<Border Grid.Row="0" Background="#2196F3" Padding="20">
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="Auto"/>
				</Grid.ColumnDefinitions>

				<TextBlock Grid.Column="0" Text="Carburant et Trajets" FontSize="24" FontWeight="Bold" Foreground="White"/>

				<StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
					<TextBlock Text="Vehicule :" Foreground="White" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,10,0"/>
					<ComboBox Width="300" Height="35" ItemsSource="{Binding Vehicules}" SelectedItem="{Binding VehiculeSelectionne, Mode=TwoWay}" DisplayMemberPath="DescriptionComplete"/>
				</StackPanel>
			</Grid>
		</Border>

		<TabControl Grid.Row="1" Margin="20">
			<TabItem Header="Carburant">
				<Grid Margin="15">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="350"/>
						<ColumnDefinition Width="*"/>
					</Grid.ColumnDefinitions>

					<Border Grid.Column="0" Background="White" Padding="20" Margin="0,0,15,0">
						<StackPanel>
							<TextBlock Text="Nouveau ravitaillement" FontSize="16" FontWeight="Bold" Foreground="#2196F3" Margin="0,0,0,15"/>
							<TextBlock Text="Date" Margin="0,0,0,5"/>
							<DatePicker SelectedDate="{Binding DateSaisie}" Margin="0,0,0,10"/>
							<TextBlock Text="Quantite (litres)" Margin="0,0,0,5"/>
							<TextBox Text="{Binding QuantiteLitres, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,10"/>
							<TextBlock Text="Cout total" Margin="0,0,0,5"/>
							<TextBox Text="{Binding CoutTotal, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,10"/>
							<TextBlock Text="Kilometrage" Margin="0,0,0,5"/>
							<TextBox Text="{Binding KilometrageCarburant, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,10"/>
							<TextBlock Text="Notes" Margin="0,0,0,5"/>
							<TextBox Text="{Binding NotesCarburant}" Height="50" TextWrapping="Wrap" Margin="0,0,0,15"/>
							<Button Content="Enregistrer" Command="{Binding EnregistrerCarburantCommand}" Height="35" Background="#4CAF50" Foreground="White"/>
						</StackPanel>
					</Border>

					<Border Grid.Column="1" Background="White" Padding="20">
						<DataGrid ItemsSource="{Binding Historique}" AutoGenerateColumns="False" IsReadOnly="True" CanUserAddRows="False">
							<DataGrid.Columns>
								<DataGridTextColumn Header="Date" Binding="{Binding DateSaisie, StringFormat=d}" Width="90"/>
								<DataGridTextColumn Header="Litres" Binding="{Binding QuantiteLitres}" Width="70"/>
								<DataGridTextColumn Header="Cout" Binding="{Binding CoutTotal}" Width="70"/>
								<DataGridTextColumn Header="Km" Binding="{Binding Kilometrage}" Width="70"/>
								<DataGridTextColumn Header="Notes" Binding="{Binding Notes}" Width="*"/>
							</DataGrid.Columns>
						</DataGrid>
					</Border>
				</Grid>
			</TabItem>

			<TabItem Header="Trajets">
				<Grid Margin="15">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="350"/>
						<ColumnDefinition Width="*"/>
					</Grid.ColumnDefinitions>

					<Border Grid.Column="0" Background="White" Padding="20" Margin="0,0,15,0">
						<StackPanel>
							<TextBlock Text="Nouveau trajet" FontSize="16" FontWeight="Bold" Foreground="#2196F3" Margin="0,0,0,15"/>
							<TextBlock Text="Date" Margin="0,0,0,5"/>
							<DatePicker SelectedDate="{Binding DateTrajet}" Margin="0,0,0,10"/>
							<TextBlock Text="Lieu depart" Margin="0,0,0,5"/>
							<TextBox Text="{Binding LieuDepart}" Margin="0,0,0,10"/>
							<TextBlock Text="Lieu arrivee" Margin="0,0,0,5"/>
							<TextBox Text="{Binding LieuArrivee}" Margin="0,0,0,10"/>
							<TextBlock Text="Km depart" Margin="0,0,0,5"/>
							<TextBox Text="{Binding KilometrageDepart, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,10"/>
							<TextBlock Text="Km arrivee" Margin="0,0,0,5"/>
							<TextBox Text="{Binding KilometrageArrivee, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,10"/>
							<TextBlock Text="Notes" Margin="0,0,0,5"/>
							<TextBox Text="{Binding NotesTrajet}" Height="50" TextWrapping="Wrap" Margin="0,0,0,15"/>
							<Button Content="Enregistrer" Command="{Binding EnregistrerTrajetCommand}" Height="35" Background="#4CAF50" Foreground="White"/>
						</StackPanel>
					</Border>

					<Border Grid.Column="1" Background="White" Padding="20">
						<DataGrid ItemsSource="{Binding Trajets}" AutoGenerateColumns="False" IsReadOnly="True" CanUserAddRows="False">
							<DataGrid.Columns>
								<DataGridTextColumn Header="Date" Binding="{Binding DateTrajet, StringFormat=d}" Width="90"/>
								<DataGridTextColumn Header="Depart" Binding="{Binding LieuDepart}" Width="100"/>
								<DataGridTextColumn Header="Arrivee" Binding="{Binding LieuArrivee}" Width="100"/>
								<DataGridTextColumn Header="Distance" Binding="{Binding DistanceParcourue}" Width="70"/>
								<DataGridTextColumn Header="Notes" Binding="{Binding Notes}" Width="*"/>
							</DataGrid.Columns>
						</DataGrid>
					</Border>
				</Grid>
			</TabItem>
		</TabControl>

		<Border Grid.Row="2" Background="#ECEFF1" Padding="10">
			<TextBlock Text="{Binding MessageErreur}" FontWeight="SemiBold"/>
		</Border>
	</Grid>
</UserControl>