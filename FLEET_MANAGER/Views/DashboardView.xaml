<UserControl x:Class="FLEET_MANAGER.Views.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="{StaticResource BackgroundBrush}">
	<Grid Margin="32">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<!-- Header -->
		<StackPanel Grid.Row="0" Style="{StaticResource PageHeaderStyle}" Margin="0,0,0,32">
			<TextBlock Style="{StaticResource PageTitleStyle}">
				Tableau de Bord
			</TextBlock>
			<TextBlock Style="{StaticResource PageDescriptionStyle}">
				Vue d'ensemble de votre flotte de véhicules
			</TextBlock>
		</StackPanel>

		<!-- Contenu principal -->
		<ScrollViewer Grid.Row="1" Style="{StaticResource ModernScrollViewerStyle}">
			<StackPanel>
				<!-- Statistiques -->
				<Grid Margin="0,0,0,32">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="*"/>
					</Grid.ColumnDefinitions>

					<!-- Bloc 1: Total Véhicules -->
					<Border Grid.Column="0" Style="{StaticResource StatBoxStyle}">
						<StackPanel>
							<TextBlock Style="{StaticResource StatLabelStyle}">
								Total Véhicules
							</TextBlock>
							<TextBlock Text="{Binding TotalVehicules}"
									   FontSize="36"
									   FontWeight="Bold"
									   Foreground="{StaticResource PrimaryBrush}"
									   Margin="0,8,0,0"/>
							<TextBlock Text="Véhicules"
									   FontSize="12"
									   Foreground="{StaticResource TextSecondaryBrush}"
									   Margin="0,4,0,0"/>
						</StackPanel>
					</Border>

					<!-- Bloc 2: En Service -->
					<Border Grid.Column="1" Style="{StaticResource StatBoxStyle}" Margin="12,0,0,0">
						<StackPanel>
							<TextBlock Style="{StaticResource StatLabelStyle}">
								En Service
							</TextBlock>
							<TextBlock Text="{Binding VehiculesEnService}"
									   FontSize="36"
									   FontWeight="Bold"
									   Foreground="{StaticResource SuccessBrush}"
									   Margin="0,8,0,0"/>
							<TextBlock Text="Actifs"
									   FontSize="12"
									   Foreground="{StaticResource TextSecondaryBrush}"
									   Margin="0,4,0,0"/>
						</StackPanel>
					</Border>

					<!-- Bloc 3: En Maintenance -->
					<Border Grid.Column="2" Style="{StaticResource StatBoxStyle}" Margin="12,0,0,0">
						<StackPanel>
							<TextBlock Style="{StaticResource StatLabelStyle}">
								En Maintenance
							</TextBlock>
							<TextBlock Text="{Binding VehiculesEnMaintenance}"
									   FontSize="36"
									   FontWeight="Bold"
									   Foreground="{StaticResource WarningBrush}"
									   Margin="0,8,0,0"/>
							<TextBlock Text="Révision"
									   FontSize="12"
									   Foreground="{StaticResource TextSecondaryBrush}"
									   Margin="0,4,0,0"/>
						</StackPanel>
					</Border>

					<!-- Bloc 4: Disponible -->
					<Border Grid.Column="3" Style="{StaticResource StatBoxStyle}" Margin="12,0,0,0">
						<StackPanel>
							<TextBlock Style="{StaticResource StatLabelStyle}">
								Disponible
							</TextBlock>
							<TextBlock Text="{Binding VehiculesDisponibles}"
									   FontSize="36"
									   FontWeight="Bold"
									   Foreground="{StaticResource InfoBrush}"
									   Margin="0,8,0,0"/>
							<TextBlock Text="Libres"
									   FontSize="12"
									   Foreground="{StaticResource TextSecondaryBrush}"
									   Margin="0,4,0,0"/>
						</StackPanel>
					</Border>

					<!-- Bloc 5: Coût Total Carburant -->
					<Border Grid.Column="4" Style="{StaticResource StatBoxStyle}" Margin="12,0,0,0">
						<StackPanel>
							<TextBlock Style="{StaticResource StatLabelStyle}">
								Coût Essence
							</TextBlock>
							<TextBlock Text="{Binding CoutTotalCarburant, StringFormat=C}"
									   FontSize="32"
									   FontWeight="Bold"
									   Foreground="{StaticResource DangerBrush}"
									   Margin="0,8,0,0"/>
							<TextBlock Text="Total"
									   FontSize="12"
									   Foreground="{StaticResource TextSecondaryBrush}"
									   Margin="0,4,0,0"/>
						</StackPanel>
					</Border>
				</Grid>

				<!-- Liste des véhicules -->
				<Border Style="{StaticResource CardStyle}">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="*"/>
						</Grid.RowDefinitions>

						<TextBlock Grid.Row="0" Style="{StaticResource SectionTitleStyle}">
							Tous les Véhicules
						</TextBlock>

						<TextBlock Grid.Row="1" Style="{StaticResource SubtitleStyle}">
							<Run Text="{Binding Vehicules.Count, Mode=OneWay}"/>
							<Run Text="véhicules enregistrés"/>
						</TextBlock>

						<DataGrid Grid.Row="2"
								  ItemsSource="{Binding Vehicules}"
								  AutoGenerateColumns="False"
								  CanUserAddRows="False"
								  IsReadOnly="True"
								  BorderThickness="0"
								  Background="Transparent"
								  RowBackground="White"
								  AlternatingRowBackground="{StaticResource BackgroundBrush}"
								  GridLinesVisibility="None"
								  HeadersVisibility="Column"
								  SelectionMode="Single"
								  CanUserResizeRows="False"
								  Margin="0,16,0,0"
								  MaxHeight="400">
							<DataGrid.Resources>
								<Style TargetType="DataGridColumnHeader">
									<Setter Property="Background" Value="Transparent"/>
									<Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
									<Setter Property="FontWeight" Value="SemiBold"/>
									<Setter Property="FontSize" Value="12"/>
									<Setter Property="Padding" Value="12,8"/>
									<Setter Property="BorderThickness" Value="0,0,0,1"/>
									<Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
								</Style>
								<Style TargetType="DataGridCell">
									<Setter Property="BorderThickness" Value="0"/>
									<Setter Property="Padding" Value="12,12"/>
									<Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
									<Setter Property="FontSize" Value="13"/>
								</Style>
								<Style TargetType="DataGridRow">
									<Setter Property="Height" Value="48"/>
								</Style>
							</DataGrid.Resources>
							<DataGrid.Columns>
								<DataGridTextColumn Header="Marque" Binding="{Binding Marque}" Width="120"/>
								<DataGridTextColumn Header="Modèle" Binding="{Binding Modele}" Width="140"/>
								<DataGridTextColumn Header="Immatriculation" Binding="{Binding Immatriculation}" Width="140"/>
								<DataGridTextColumn Header="Année" Binding="{Binding AnneeFabrication}" Width="90"/>
								<DataGridTextColumn Header="Type" Binding="{Binding TypeCarburant}" Width="110"/>
								<DataGridTextColumn Header="État" Binding="{Binding Etat}" Width="140"/>
								<DataGridTextColumn Header="Kilométrage" Binding="{Binding KilomettrageActuel, StringFormat={}{0:N0}}" Width="*"/>
							</DataGrid.Columns>
						</DataGrid>
					</Grid>
				</Border>
			</StackPanel>
		</ScrollViewer>
	</Grid>
</UserControl>
