<UserControl x:Class="FLEET_MANAGER.Views.UtilisateurView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:FLEET_MANAGER.Views"
             Background="{StaticResource BackgroundBrush}">
	<Grid Margin="32">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<!-- Header -->
		<Grid Grid.Row="0" Margin="0,0,0,32">
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="Auto"/>
			</Grid.RowDefinitions>

			<!-- Titre et description -->
			<StackPanel Grid.Row="0" Style="{StaticResource PageHeaderStyle}">
				<TextBlock Style="{StaticResource PageTitleStyle}">
					Utilisateurs
				</TextBlock>
				<TextBlock Style="{StaticResource PageDescriptionStyle}">
					Gestion des comptes utilisateurs et des permissions
				</TextBlock>
			</StackPanel>

			<!-- Barre d'actions -->
			<Grid Grid.Row="1" Margin="0,16,0,0">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="Auto"/>
					<ColumnDefinition Width="Auto"/>
				</Grid.ColumnDefinitions>

				<!-- Barre de recherche -->
				<Border Grid.Column="0"
						BorderBrush="{StaticResource BorderBrush}"
						BorderThickness="1"
						CornerRadius="8"
						Background="White"
						Height="42"
						Margin="0,0,16,0">
					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition Width="*"/>
						</Grid.ColumnDefinitions>

						<TextBlock Grid.Column="0"
								   Text="ğŸ”"
								   FontSize="16"
								   VerticalAlignment="Center"
								   Margin="12,0,8,0"
								   Foreground="{StaticResource TextSecondaryBrush}"/>

						<TextBox Grid.Column="1"
								 Text="{Binding RechercheTexte, UpdateSourceTrigger=PropertyChanged}"
								 BorderThickness="0"
								 Background="Transparent"
								 VerticalAlignment="Center"
								 FontSize="14"
								 Foreground="{StaticResource TextPrimaryBrush}">
							<TextBox.Style>
								<Style TargetType="TextBox">
									<Setter Property="Template">
										<Setter.Value>
											<ControlTemplate TargetType="TextBox">
												<Grid>
													<TextBlock Text="Rechercher un utilisateur..."
															   Foreground="{StaticResource TextSecondaryBrush}"
															   VerticalAlignment="Center"
															   Visibility="Collapsed"
															   x:Name="Placeholder"/>
													<ScrollViewer x:Name="PART_ContentHost"
																  VerticalAlignment="Center"
																  Foreground="{TemplateBinding Foreground}"/>
												</Grid>
												<ControlTemplate.Triggers>
													<Trigger Property="Text" Value="">
														<Setter TargetName="Placeholder" Property="Visibility" Value="Visible"/>
													</Trigger>
													<Trigger Property="Text" Value="{x:Null}">
														<Setter TargetName="Placeholder" Property="Visibility" Value="Visible"/>
													</Trigger>
												</ControlTemplate.Triggers>
											</ControlTemplate>
										</Setter.Value>
									</Setter>
								</Style>
							</TextBox.Style>
						</TextBox>
					</Grid>
				</Border>

				<!-- Message d'erreur/succÃ¨s -->
				<Border Grid.Column="1"
						Visibility="{Binding MessageErreur, Converter={StaticResource BoolToVisibilityConverter}}"
						Background="{StaticResource InfoLightBrush}"
						BorderBrush="{StaticResource InfoBrush}"
						BorderThickness="1"
						CornerRadius="8"
						Padding="12,8"
						Margin="0,0,16,0">
					<TextBlock Text="{Binding MessageErreur}"
							   FontSize="13"
							   Foreground="{StaticResource TextPrimaryBrush}"/>
				</Border>

				<!-- Boutons d'action -->
				<Button Grid.Column="2"
						Command="{Binding Nouveau}"
						Style="{StaticResource PrimaryButtonStyle}"
						Height="42"
						Padding="20,0">
					<StackPanel Orientation="Horizontal">
						<TextBlock Text="+" FontSize="18" FontWeight="Bold" Margin="0,0,8,0"/>
						<TextBlock Text="Nouvel Utilisateur" FontSize="14"/>
					</StackPanel>
				</Button>
			</Grid>
		</Grid>

		<!-- Contenu principal -->
		<Grid Grid.Row="1">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*"/>
				<ColumnDefinition Width="420"/>
			</Grid.ColumnDefinitions>

			<!-- Liste des utilisateurs -->
			<Border Grid.Column="0" Style="{StaticResource CardStyle}" Margin="0,0,24,0">
				<Grid>
					<Grid.RowDefinitions>
						<RowDefinition Height="Auto"/>
						<RowDefinition Height="Auto"/>
						<RowDefinition Height="*"/>
						<RowDefinition Height="Auto"/>
					</Grid.RowDefinitions>

					<TextBlock Grid.Row="0" Style="{StaticResource SectionTitleStyle}">
						Liste des Utilisateurs
					</TextBlock>

					<TextBlock Grid.Row="1" Style="{StaticResource SubtitleStyle}">
						<Run Text="{Binding UtilisateursFiltres.Count, Mode=OneWay}"/>
						<Run Text="utilisateurs affichÃ©s"/>
					</TextBlock>

					<!-- DataGrid -->
					<DataGrid Grid.Row="2"
							  ItemsSource="{Binding UtilisateursFiltres}"
							  SelectedItem="{Binding UtilisateurSelectionne}"
							  AutoGenerateColumns="False"
							  CanUserAddRows="False"
							  IsReadOnly="True"
							  BorderThickness="0"
							  Background="Transparent"
							  RowBackground="White"
							  AlternatingRowBackground="{StaticResource BackgroundBrush}"
							  GridLinesVisibility="None"
							  HeadersVisibility="Column"
							  SelectionMode="Single"
							  CanUserResizeRows="False"
							  Margin="0,16,0,0">
						<DataGrid.Resources>
							<Style TargetType="DataGridColumnHeader">
								<Setter Property="Background" Value="Transparent"/>
								<Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
								<Setter Property="FontWeight" Value="SemiBold"/>
								<Setter Property="FontSize" Value="12"/>
								<Setter Property="Padding" Value="12,8"/>
								<Setter Property="BorderThickness" Value="0,0,0,1"/>
								<Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
							</Style>
							<Style TargetType="DataGridCell">
								<Setter Property="BorderThickness" Value="0"/>
								<Setter Property="Padding" Value="12,12"/>
								<Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
								<Setter Property="FontSize" Value="13"/>
							</Style>
							<Style TargetType="DataGridRow">
								<Setter Property="Height" Value="48"/>
								<Style.Triggers>
									<Trigger Property="IsSelected" Value="True">
										<Setter Property="Background" Value="{StaticResource PrimaryLightBrush}"/>
									</Trigger>
								</Style.Triggers>
							</Style>
						</DataGrid.Resources>
						<DataGrid.Columns>
							<DataGridTextColumn Header="Nom d'utilisateur" Binding="{Binding NomUtilisateur}" Width="150"/>
							<DataGridTextColumn Header="Email" Binding="{Binding Email}" Width="200"/>
							<DataGridTextColumn Header="Nom" Binding="{Binding Nom}" Width="120"/>
							<DataGridTextColumn Header="PrÃ©nom" Binding="{Binding Prenom}" Width="120"/>
							<DataGridTextColumn Header="RÃ´le" Binding="{Binding Role}" Width="140"/>
						</DataGrid.Columns>
					</DataGrid>

					<!-- Bouton Voir Plus et message de fin -->
					<StackPanel Grid.Row="3" Margin="0,16,0,0">
						<!-- Bouton Voir Plus -->
						<Button Command="{Binding ChargerPlusCommand}"
								Style="{StaticResource SecondaryButtonStyle}"
								Height="45"
								HorizontalAlignment="Center"
								Padding="40,0">
							<Button.Visibility>
								<Binding Path="TousUtilisateursCharges">
									<Binding.Converter>
										<local:InverseBoolToVisibilityConverter/>
									</Binding.Converter>
								</Binding>
							</Button.Visibility>
							<StackPanel Orientation="Horizontal">
								<TextBlock Text="ğŸ‘‡" FontSize="16" Margin="0,0,8,0"/>
								<TextBlock Text="Voir plus d'utilisateurs" FontSize="14" FontWeight="Medium"/>
							</StackPanel>
						</Button>

						<!-- Message fin de liste -->
						<Border Background="{StaticResource BackgroundBrush}"
								CornerRadius="8"
								Padding="16"
								HorizontalAlignment="Center"
								Visibility="{Binding TousUtilisateursCharges, Converter={StaticResource BoolToVisibilityConverter}}">
							<TextBlock Text="âœ… Tous les utilisateurs sont affichÃ©s"
									   FontSize="13"
									   Foreground="{StaticResource TextSecondaryBrush}"/>
						</Border>
					</StackPanel>
				</Grid>
			</Border>

			<!-- Panneau de dÃ©tail / Formulaire -->
			<ScrollViewer Grid.Column="1" Style="{StaticResource ModernScrollViewerStyle}">
				<Border Style="{StaticResource CardStyle}">
					<StackPanel>
						<!-- En-tÃªte du formulaire -->
						<Grid Margin="0,0,0,24">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="Auto"/>
							</Grid.ColumnDefinitions>

							<StackPanel Grid.Column="0">
								<TextBlock>
									<TextBlock.Style>
										<Style TargetType="TextBlock" BasedOn="{StaticResource SectionTitleStyle}">
											<Setter Property="Text" Value="DÃ©tails de l'utilisateur"/>
											<Style.Triggers>
												<DataTrigger Binding="{Binding EstEnEdition}" Value="True">
													<Setter Property="Text" Value="Ã‰dition utilisateur"/>
												</DataTrigger>
												<DataTrigger Binding="{Binding UtilisateurSelectionne}" Value="{x:Null}">
													<Setter Property="Text" Value="SÃ©lectionner un utilisateur"/>
												</DataTrigger>
											</Style.Triggers>
										</Style>
									</TextBlock.Style>
								</TextBlock>
								<TextBlock>
									<TextBlock.Style>
										<Style TargetType="TextBlock" BasedOn="{StaticResource SubtitleStyle}">
											<Setter Property="Text" Value="Cliquez sur un utilisateur pour voir ses dÃ©tails"/>
											<Style.Triggers>
												<DataTrigger Binding="{Binding EstEnEdition}" Value="True">
													<Setter Property="Text" Value="Modifier les informations ci-dessous"/>
												</DataTrigger>
												<MultiDataTrigger>
													<MultiDataTrigger.Conditions>
														<Condition Binding="{Binding EstEnEdition}" Value="False"/>
														<Condition Binding="{Binding UtilisateurSelectionne, Converter={StaticResource BoolToVisibilityConverter}}" Value="Visible"/>
													</MultiDataTrigger.Conditions>
													<Setter Property="Text" Value="Informations du compte"/>
												</MultiDataTrigger>
											</Style.Triggers>
										</Style>
									</TextBlock.Style>
								</TextBlock>
							</StackPanel>

							<!-- Badge statut -->
							<Border Grid.Column="1"
									Visibility="{Binding UtilisateurSelectionne, Converter={StaticResource BoolToVisibilityConverter}}"
									Margin="0">
								<Border.Style>
									<Style TargetType="Border" BasedOn="{StaticResource SuccessBadgeStyle}">
										<Style.Triggers>
											<DataTrigger Binding="{Binding UtilisateurSelectionne.Actif}" Value="False">
												<Setter Property="Background" Value="{StaticResource DangerLightBrush}"/>
											</DataTrigger>
										</Style.Triggers>
									</Style>
								</Border.Style>
								<TextBlock FontSize="12" FontWeight="Medium">
									<TextBlock.Style>
										<Style TargetType="TextBlock">
											<Setter Property="Foreground" Value="{StaticResource SuccessBrush}"/>
											<Setter Property="Text" Value="Actif"/>
											<Style.Triggers>
												<DataTrigger Binding="{Binding UtilisateurSelectionne.Actif}" Value="False">
													<Setter Property="Foreground" Value="{StaticResource DangerBrush}"/>
													<Setter Property="Text" Value="Inactif"/>
												</DataTrigger>
											</Style.Triggers>
										</Style>
									</TextBlock.Style>
								</TextBlock>
							</Border>
						</Grid>

						<!-- Formulaire -->
						<StackPanel Visibility="{Binding AfficherFormulaire, Converter={StaticResource BoolToVisibilityConverter}}">
							<!-- Nom d'utilisateur -->
							<TextBlock Text="Nom d'utilisateur"
									   FontSize="13"
									   FontWeight="Medium"
									   Foreground="{StaticResource TextPrimaryBrush}"
									   Margin="0,0,0,6"/>
							<Border BorderBrush="{StaticResource BorderBrush}"
									BorderThickness="1"
									CornerRadius="8"
									Background="White"
									Height="42"
									Margin="0,0,0,6">
								<TextBox Text="{Binding NomUtilisateur, UpdateSourceTrigger=PropertyChanged}"
										 BorderThickness="0"
										 VerticalAlignment="Center"
										 Padding="12,0"
										 FontSize="14"
										 Foreground="{StaticResource TextPrimaryBrush}"
										 IsEnabled="{Binding EstEnEdition}"/>
							</Border>
							<TextBlock Text="{Binding NomUtilisateurError}"
									   Foreground="{StaticResource DangerBrush}"
									   FontSize="11"
									   Margin="0,0,0,16"
									   Visibility="{Binding NomUtilisateurError, Converter={StaticResource BoolToVisibilityConverter}}"/>

							<!-- Email -->
							<TextBlock Text="Email"
									   FontSize="13"
									   FontWeight="Medium"
									   Foreground="{StaticResource TextPrimaryBrush}"
									   Margin="0,0,0,6"/>
							<Border BorderBrush="{StaticResource BorderBrush}"
									BorderThickness="1"
									CornerRadius="8"
									Background="White"
									Height="42"
									Margin="0,0,0,6">
								<TextBox Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"
										 BorderThickness="0"
										 VerticalAlignment="Center"
										 Padding="12,0"
										 FontSize="14"
										 Foreground="{StaticResource TextPrimaryBrush}"
										 IsEnabled="{Binding EstEnEdition}"/>
							</Border>
							<TextBlock Text="{Binding EmailError}"
									   Foreground="{StaticResource DangerBrush}"
									   FontSize="11"
									   Margin="0,0,0,16"
									   Visibility="{Binding EmailError, Converter={StaticResource BoolToVisibilityConverter}}"/>

							<!-- Nom -->
							<TextBlock Text="Nom"
									   FontSize="13"
									   FontWeight="Medium"
									   Foreground="{StaticResource TextPrimaryBrush}"
									   Margin="0,0,0,6"/>
							<Border BorderBrush="{StaticResource BorderBrush}"
									BorderThickness="1"
									CornerRadius="8"
									Background="White"
									Height="42"
									Margin="0,0,0,16">
								<TextBox Text="{Binding Nom, UpdateSourceTrigger=PropertyChanged}"
										 BorderThickness="0"
										 VerticalAlignment="Center"
										 Padding="12,0"
										 FontSize="14"
										 Foreground="{StaticResource TextPrimaryBrush}"
										 IsEnabled="{Binding EstEnEdition}"/>
							</Border>

							<!-- PrÃ©nom -->
							<TextBlock Text="PrÃ©nom"
									   FontSize="13"
									   FontWeight="Medium"
									   Foreground="{StaticResource TextPrimaryBrush}"
									   Margin="0,0,0,6"/>
							<Border BorderBrush="{StaticResource BorderBrush}"
									BorderThickness="1"
									CornerRadius="8"
									Background="White"
									Height="42"
									Margin="0,0,0,16">
								<TextBox Text="{Binding Prenom, UpdateSourceTrigger=PropertyChanged}"
										 BorderThickness="0"
										 VerticalAlignment="Center"
										 Padding="12,0"
										 FontSize="14"
										 Foreground="{StaticResource TextPrimaryBrush}"
										 IsEnabled="{Binding EstEnEdition}"/>
							</Border>

							<!-- Mot de passe -->
							<TextBlock FontSize="13"
									   FontWeight="Medium"
									   Foreground="{StaticResource TextPrimaryBrush}"
									   Margin="0,0,0,6">
								<TextBlock.Style>
									<Style TargetType="TextBlock">
										<Setter Property="Text" Value="Mot de passe"/>
										<Style.Triggers>
											<DataTrigger Binding="{Binding EstEnEdition}" Value="True">
												<Setter Property="Text" Value="Mot de passe (laisser vide pour ne pas changer)"/>
											</DataTrigger>
										</Style.Triggers>
									</Style>
								</TextBlock.Style>
							</TextBlock>
							<Border BorderBrush="{StaticResource BorderBrush}"
									BorderThickness="1"
									CornerRadius="8"
									Background="White"
									Height="42"
									Margin="0,0,0,16">
								<PasswordBox x:Name="PasswordBox"
											 BorderThickness="0"
											 VerticalAlignment="Center"
											 Padding="12,0"
											 FontSize="14"
											 IsEnabled="{Binding EstEnEdition}"
											 PasswordChanged="PasswordBox_PasswordChanged"/>
							</Border>

							<!-- RÃ´le -->
							<TextBlock Text="RÃ´le"
									   FontSize="13"
									   FontWeight="Medium"
									   Foreground="{StaticResource TextPrimaryBrush}"
									   Margin="0,0,0,6"/>
							<Border BorderBrush="{StaticResource BorderBrush}"
									BorderThickness="1"
									CornerRadius="8"
									Background="White"
									Margin="0,0,0,24">
								<ComboBox x:Name="ComboRole"
										  SelectedValue="{Binding RoleSelectionne, Mode=TwoWay}"
										  SelectedValuePath="Tag"
										  Height="40"
										  FontSize="14"
										  BorderThickness="0"
										  Background="Transparent"
										  Padding="12,0"
										  IsEnabled="{Binding EstEnEdition}">
									<ComboBox.Resources>
										<Style TargetType="ComboBoxItem">
											<Setter Property="Height" Value="42"/>
											<Setter Property="Padding" Value="12,8"/>
											<Setter Property="Background" Value="Transparent"/>
											<Setter Property="Template">
												<Setter.Value>
													<ControlTemplate TargetType="ComboBoxItem">
														<Border x:Name="ItemBorder"
																Background="{TemplateBinding Background}"
																Padding="{TemplateBinding Padding}"
																CornerRadius="6"
																Margin="4,2">
															<Grid>
																<Grid.ColumnDefinitions>
																	<ColumnDefinition Width="Auto"/>
																	<ColumnDefinition Width="*"/>
																</Grid.ColumnDefinitions>

																<Border Grid.Column="0"
																		Width="28"
																		Height="28"
																		CornerRadius="14"
																		Margin="0,0,12,0"
																		x:Name="IconBorder">
																	<Border.Style>
																		<Style TargetType="Border">
																			<Setter Property="Background" Value="{StaticResource InfoLightBrush}"/>
																			<Style.Triggers>
																				<DataTrigger Binding="{Binding Tag, RelativeSource={RelativeSource AncestorType=ComboBoxItem}}" Value="admin">
																					<Setter Property="Background" Value="{StaticResource WarningLightBrush}"/>
																				</DataTrigger>
																				<DataTrigger Binding="{Binding Tag, RelativeSource={RelativeSource AncestorType=ComboBoxItem}}" Value="super_admin">
																					<Setter Property="Background" Value="{StaticResource DangerLightBrush}"/>
																				</DataTrigger>
																			</Style.Triggers>
																		</Style>
																	</Border.Style>
																	<TextBlock HorizontalAlignment="Center"
																			   VerticalAlignment="Center"
																			   FontSize="14"
																			   x:Name="IconText">
																		<TextBlock.Style>
																			<Style TargetType="TextBlock">
																				<Setter Property="Text" Value="ğŸ‘¤"/>
																				<Setter Property="Foreground" Value="{StaticResource InfoBrush}"/>
																				<Style.Triggers>
																					<DataTrigger Binding="{Binding Tag, RelativeSource={RelativeSource AncestorType=ComboBoxItem}}" Value="admin">
																						<Setter Property="Text" Value="âš™"/>
																						<Setter Property="Foreground" Value="{StaticResource WarningBrush}"/>
																					</DataTrigger>
																					<DataTrigger Binding="{Binding Tag, RelativeSource={RelativeSource AncestorType=ComboBoxItem}}" Value="super_admin">
																						<Setter Property="Text" Value="â˜…"/>
																						<Setter Property="Foreground" Value="{StaticResource DangerBrush}"/>
																					</DataTrigger>
																				</Style.Triggers>
																			</Style>
																		</TextBlock.Style>
																	</TextBlock>
																</Border>

																<ContentPresenter Grid.Column="1"
																				  Content="{TemplateBinding Content}"
																				  VerticalAlignment="Center"
																				  HorizontalAlignment="Left"/>
															</Grid>
														</Border>
														<ControlTemplate.Triggers>
															<Trigger Property="IsHighlighted" Value="True">
																<Setter TargetName="ItemBorder" Property="Background" Value="{StaticResource PrimaryLightBrush}"/>
															</Trigger>
															<Trigger Property="IsSelected" Value="True">
																<Setter TargetName="ItemBorder" Property="Background" Value="{StaticResource PrimaryLightBrush}"/>
															</Trigger>
														</ControlTemplate.Triggers>
													</ControlTemplate>
												</Setter.Value>
											</Setter>
										</Style>
									</ComboBox.Resources>
									<ComboBoxItem Tag="utilisateur" Content="Utilisateur"/>
									<ComboBoxItem Tag="admin" Content="Administrateur"/>
									<ComboBoxItem Tag="super_admin" Content="Super Administrateur"/>
								</ComboBox>
							</Border>

							<!-- Boutons d'action -->
							<Grid Margin="0,8,0,0">
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="*"/>
									<ColumnDefinition Width="*"/>
								</Grid.ColumnDefinitions>

								<!-- Mode lecture : Modifier et Supprimer -->
								<Grid Grid.Column="0"
									  Grid.ColumnSpan="2"
									  Visibility="{Binding EstEnEdition, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter=Invert, FallbackValue=Collapsed}">
									<Grid.ColumnDefinitions>
										<ColumnDefinition Width="*"/>
										<ColumnDefinition Width="*"/>
									</Grid.ColumnDefinitions>

									<!-- Bouton Modifier avec style moderne -->
									<Button Grid.Column="0"
											Command="{Binding ModifierCommand}"
											Height="48"
											Margin="0,0,6,0"
											Cursor="Hand">
										<Button.Style>
											<Style TargetType="Button">
												<Setter Property="Background">
													<Setter.Value>
														<LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
															<GradientStop Color="#F59E0B" Offset="0"/>
															<GradientStop Color="#F97316" Offset="1"/>
														</LinearGradientBrush>
													</Setter.Value>
												</Setter>
												<Setter Property="Foreground" Value="White"/>
												<Setter Property="BorderThickness" Value="0"/>
												<Setter Property="FontWeight" Value="SemiBold"/>
												<Setter Property="Template">
													<Setter.Value>
														<ControlTemplate TargetType="Button">
															<Border Background="{TemplateBinding Background}"
																	CornerRadius="12"
																	Padding="{TemplateBinding Padding}">
																<Border.Effect>
																	<DropShadowEffect Color="#F59E0B"
																					  BlurRadius="15"
																					  ShadowDepth="0"
																					  Opacity="0.3"/>
																</Border.Effect>
																<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
															</Border>
														</ControlTemplate>
													</Setter.Value>
												</Setter>
												<Style.Triggers>
													<Trigger Property="IsMouseOver" Value="True">
														<Setter Property="RenderTransform">
															<Setter.Value>
																<ScaleTransform ScaleX="1.02" ScaleY="1.02"/>
															</Setter.Value>
														</Setter>
													</Trigger>
													<Trigger Property="IsEnabled" Value="False">
														<Setter Property="Opacity" Value="0.5"/>
													</Trigger>
												</Style.Triggers>
											</Style>
										</Button.Style>
										<Button.RenderTransform>
											<ScaleTransform ScaleX="1" ScaleY="1"/>
										</Button.RenderTransform>
										<Button.RenderTransformOrigin>0.5,0.5</Button.RenderTransformOrigin>
										<StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
											<Border Width="28" Height="28"
													CornerRadius="14"
													Background="#00000020"
													Margin="0,0,8,0">
												<TextBlock Text="âœ" FontSize="16"
														   HorizontalAlignment="Center"
														   VerticalAlignment="Center"
														   Foreground="White"/>
											</Border>
											<TextBlock Text="Modifier"
													   FontSize="14"
													   VerticalAlignment="Center"/>
										</StackPanel>
									</Button>

									<!-- Bouton Supprimer avec style moderne -->
									<Button Grid.Column="1"
											Command="{Binding SupprimerCommand}"
											Height="48"
											Margin="6,0,0,0"
											Cursor="Hand">
										<Button.Style>
											<Style TargetType="Button">
												<Setter Property="Background">
													<Setter.Value>
														<LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
															<GradientStop Color="#EF4444" Offset="0"/>
															<GradientStop Color="#DC2626" Offset="1"/>
														</LinearGradientBrush>
													</Setter.Value>
												</Setter>
												<Setter Property="Foreground" Value="White"/>
												<Setter Property="BorderThickness" Value="0"/>
												<Setter Property="FontWeight" Value="SemiBold"/>
												<Setter Property="Template">
													<Setter.Value>
														<ControlTemplate TargetType="Button">
															<Border Background="{TemplateBinding Background}"
																	CornerRadius="12"
																	Padding="{TemplateBinding Padding}">
																<Border.Effect>
																	<DropShadowEffect Color="#EF4444"
																					  BlurRadius="15"
																					  ShadowDepth="0"
																					  Opacity="0.3"/>
																</Border.Effect>
																<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
															</Border>
														</ControlTemplate>
													</Setter.Value>
												</Setter>
												<Style.Triggers>
													<Trigger Property="IsMouseOver" Value="True">
														<Setter Property="RenderTransform">
															<Setter.Value>
																<ScaleTransform ScaleX="1.02" ScaleY="1.02"/>
															</Setter.Value>
														</Setter>
													</Trigger>
													<Trigger Property="IsEnabled" Value="False">
														<Setter Property="Opacity" Value="0.5"/>
													</Trigger>
												</Style.Triggers>
											</Style>
										</Button.Style>
										<Button.RenderTransform>
											<ScaleTransform ScaleX="1" ScaleY="1"/>
										</Button.RenderTransform>
										<Button.RenderTransformOrigin>0.5,0.5</Button.RenderTransformOrigin>
										<StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
											<Border Width="28" Height="28"
													CornerRadius="14"
													Background="#00000020"
													Margin="0,0,8,0">
												<TextBlock Text="ğŸ—‘" FontSize="16"
														   HorizontalAlignment="Center"
														   VerticalAlignment="Center"
														   Foreground="White"/>
											</Border>
											<TextBlock Text="Supprimer"
													   FontSize="14"
													   VerticalAlignment="Center"/>
										</StackPanel>
									</Button>
								</Grid>

								<!-- Mode Ã©dition : Sauvegarder et Annuler -->
								<!-- Bouton Sauvegarder avec style moderne -->
								<Button Grid.Column="0"
										Command="{Binding SauvegarderCommand}"
										Height="48"
										Margin="0,0,6,0"
										Cursor="Hand"
										Visibility="{Binding EstEnEdition, Converter={StaticResource BoolToVisibilityConverter}, FallbackValue=Collapsed}">
									<Button.Style>
										<Style TargetType="Button">
											<Setter Property="Background">
												<Setter.Value>
													<LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
														<GradientStop Color="#10B981" Offset="0"/>
														<GradientStop Color="#059669" Offset="1"/>
													</LinearGradientBrush>
												</Setter.Value>
											</Setter>
											<Setter Property="Foreground" Value="White"/>
											<Setter Property="BorderThickness" Value="0"/>
											<Setter Property="FontWeight" Value="SemiBold"/>
											<Setter Property="Template">
												<Setter.Value>
													<ControlTemplate TargetType="Button">
														<Border Background="{TemplateBinding Background}"
																CornerRadius="12"
																Padding="{TemplateBinding Padding}">
															<Border.Effect>
																<DropShadowEffect Color="#10B981"
																				  BlurRadius="15"
																				  ShadowDepth="0"
																				  Opacity="0.3"/>
															</Border.Effect>
															<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
														</Border>
													</ControlTemplate>
												</Setter.Value>
											</Setter>
											<Style.Triggers>
												<Trigger Property="IsMouseOver" Value="True">
													<Setter Property="RenderTransform">
														<Setter.Value>
															<ScaleTransform ScaleX="1.02" ScaleY="1.02"/>
														</Setter.Value>
													</Setter>
												</Trigger>
												<Trigger Property="IsEnabled" Value="False">
													<Setter Property="Opacity" Value="0.5"/>
												</Trigger>
											</Style.Triggers>
										</Style>
									</Button.Style>
									<Button.RenderTransform>
										<ScaleTransform ScaleX="1" ScaleY="1"/>
									</Button.RenderTransform>
									<Button.RenderTransformOrigin>0.5,0.5</Button.RenderTransformOrigin>
									<StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
										<Border Width="28" Height="28"
												CornerRadius="14"
												Background="#00000020"
												Margin="0,0,8,0">
											<TextBlock Text="âœ“" FontSize="18"
													   FontWeight="Bold"
													   HorizontalAlignment="Center"
													   VerticalAlignment="Center"
													   Foreground="White"/>
										</Border>
										<TextBlock Text="Sauvegarder"
												   FontSize="14"
												   VerticalAlignment="Center"/>
									</StackPanel>
								</Button>

								<!-- Bouton Annuler avec style moderne -->
								<Button Grid.Column="1"
										Command="{Binding AnnulerCommand}"
										Height="48"
										Margin="6,0,0,0"
										Cursor="Hand"
										Visibility="{Binding EstEnEdition, Converter={StaticResource BoolToVisibilityConverter}, FallbackValue=Collapsed}">
									<Button.Style>
										<Style TargetType="Button">
											<Setter Property="Background">
												<Setter.Value>
													<LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
														<GradientStop Color="#64748B" Offset="0"/>
														<GradientStop Color="#475569" Offset="1"/>
													</LinearGradientBrush>
												</Setter.Value>
											</Setter>
											<Setter Property="Foreground" Value="White"/>
											<Setter Property="BorderThickness" Value="0"/>
											<Setter Property="FontWeight" Value="SemiBold"/>
											<Setter Property="Template">
												<Setter.Value>
													<ControlTemplate TargetType="Button">
														<Border Background="{TemplateBinding Background}"
																CornerRadius="12"
																Padding="{TemplateBinding Padding}">
															<Border.Effect>
																<DropShadowEffect Color="#64748B"
																				  BlurRadius="15"
																				  ShadowDepth="0"
																				  Opacity="0.3"/>
															</Border.Effect>
															<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
														</Border>
													</ControlTemplate>
												</Setter.Value>
											</Setter>
											<Style.Triggers>
												<Trigger Property="IsMouseOver" Value="True">
													<Setter Property="RenderTransform">
														<Setter.Value>
															<ScaleTransform ScaleX="1.02" ScaleY="1.02"/>
														</Setter.Value>
													</Setter>
												</Trigger>
											</Style.Triggers>
										</Style>
									</Button.Style>
									<Button.RenderTransform>
										<ScaleTransform ScaleX="1" ScaleY="1"/>
									</Button.RenderTransform>
									<Button.RenderTransformOrigin>0.5,0.5</Button.RenderTransformOrigin>
									<StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
										<Border Width="28" Height="28"
												CornerRadius="14"
												Background="#00000020"
												Margin="0,0,8,0">
											<TextBlock Text="âœ•" FontSize="18"
													   FontWeight="Bold"
													   HorizontalAlignment="Center"
													   VerticalAlignment="Center"
													   Foreground="White"/>
										</Border>
										<TextBlock Text="Annuler"
												   FontSize="14"
												   VerticalAlignment="Center"/>
									</StackPanel>
								</Button>
							</Grid>
						</StackPanel>

						<!-- Message quand aucun utilisateur n'est sÃ©lectionnÃ© -->
						<StackPanel Visibility="{Binding AfficherFormulaire, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter=Invert}"
									VerticalAlignment="Center"
									HorizontalAlignment="Center"
									Margin="0,60,0,0">
							<TextBlock Text="ğŸ‘¤"
									   FontSize="48"
									   HorizontalAlignment="Center"
									   Margin="0,0,0,16"
									   Opacity="0.3"/>
							<TextBlock Text="Aucun utilisateur sÃ©lectionnÃ©"
									   FontSize="16"
									   FontWeight="SemiBold"
									   Foreground="{StaticResource TextPrimaryBrush}"
									   HorizontalAlignment="Center"
									   Margin="0,0,0,8"/>
							<TextBlock Text="SÃ©lectionnez un utilisateur dans la liste"
									   FontSize="13"
									   Foreground="{StaticResource TextSecondaryBrush}"
									   HorizontalAlignment="Center"
									   Margin="0,0,0,8"/>
							<TextBlock Text="ou cliquez sur 'Nouvel Utilisateur'"
									   FontSize="13"
									   Foreground="{StaticResource TextSecondaryBrush}"
									   HorizontalAlignment="Center"/>
						</StackPanel>
					</StackPanel>
				</Border>
			</ScrollViewer>
		</Grid>
	</Grid>
</UserControl>
